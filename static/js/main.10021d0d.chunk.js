(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{47:function(n,t,e){},69:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),o=e(36),i=e.n(o),a=(e(47),e(4)),u=e(3),s=e(2),b=e(9),j=e(5),d=e(24),l="token",f=function(n){localStorage.setItem(l,n)},p=function(){return localStorage.getItem(l)},x="https://student-json-api.lidemy.me",O=function(){var n=p();return fetch("".concat(x,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function h(){var n=Object(u.a)(["\n  display: flex;\n"]);return h=function(){return n},n}function g(){var n=Object(u.a)(["\n  padding: 10px;\n  margin-left: 20px;\n  border: none;\n"]);return g=function(){return n},n}function v(){var n=Object(u.a)(["\n  font-size: 20px;\n  cursor: pointer;\n"]);return v=function(){return n},n}function m(){var n=Object(u.a)(["\n  margin: 20px auto;\n  width: 100px;\n  display: flex;\n  justify-content: space-around;\n  list-style-type: none;\n"]);return m=function(){return n},n}function y(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return y=function(){return n},n}function w(){var n=Object(u.a)(["\n  font-size: 24px;\n  text-decoration: none;\n  color: #333;\n"]);return w=function(){return n},n}function S(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return S=function(){return n},n}function k(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return k=function(){return n},n}var z=s.b.div(k()),C=s.b.div(S()),P=Object(s.b)(b.b)(w()),D=s.b.div(y()),E=s.b.ul(m()),B=s.b.li(v()),T=s.b.button(g()),I=s.b.div(h());function $(n){var t=n.post,e=n.setIsDeletingPost;function c(n){e((function(){return!0})),function(n){var t=Number(n.target.getAttribute("id")),e=p();return console.log(e),fetch("".concat(x,"/posts/").concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(n){return n.json()}))}(n).then((function(){e((function(){return!1}))}))}return Object(r.jsxs)(C,{children:[Object(r.jsxs)(P,{to:"/posts/".concat(t.id),children:[t.id," . ",t.title]}),Object(r.jsxs)(I,{children:[Object(r.jsx)(D,{children:new Date(t.createdAt).toLocaleDateString()}),Object(r.jsx)(T,{onClick:function(n){return c(n)},id:t.id,children:"Delete"})]})]})}function J(n){for(var t=n.pages,e=n.setPages,c=[],o=1;o<=t.totalPages;o++)c.push(o);return Object(r.jsx)(E,{children:c.map((function(n){return Object(r.jsx)(B,{onClick:function(n){return function(n){e(Object(d.a)(Object(d.a)({},t),{},{currentPage:n}))}(Number(n.target.innerText))},children:n},n)}))})}function N(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],o=t[1],i=Object(c.useState)({}),u=Object(a.a)(i,2),s=u[0],b=u[1],j=Object(c.useState)(!1),d=Object(a.a)(j,2),l=d[0],f=d[1];return Object(c.useEffect)((function(){fetch("".concat(x,"/posts?_sort=id&_order=desc")).then((function(n){return n.json()})).then((function(n){o((function(){return n}));var t=n.length,e=t%5?Math.floor(t/5)+1:Math.floor(t/5);b({totalPages:e,currentPage:1})}))}),[l]),Object(r.jsxs)(z,{children:[function(n,t){var e=t.currentPage;return n.slice(5*(e-1),5*e)}(e,s).map((function(n){return Object(r.jsx)($,{post:n,setIsDeletingPost:f},n.id)})),Object(r.jsx)(J,{pages:s,setPages:b})]})}function U(){var n=Object(u.a)(["\n  font-size: 26px;\n  text-align: center;\n  margin-top: 80px;\n"]);return U=function(){return n},n}function A(){var n=Object(u.a)(["\n  background: rgb(0,0,0,0.1);\n  width: 100vw;\n  height: 120px;\n  text-align: center;\n  font-size: 32px;\n  vertical-align: baseline;\n  padding-top: 60px;\n"]);return A=function(){return n},n}var L=s.b.div(A()),F=s.b.div(U());function M(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(L,{children:"\u95dc\u65bc\u6211\u5011"}),Object(r.jsxs)(F,{children:["\u9019\u662f\u4e00\u500b\u5927\u5bb6\u96c6\u9ad4\u5275\u4f5c\u7684\u90e8\u843d\u683c\u3002",Object(r.jsx)("br",{}),"\u4f60\u53ef\u4ee5\u5728\u9019\u908a\u81ea\u7531\u8a3b\u518a\u3001\u767c\u6587\u4e26\u89c0\u770b\u5225\u4eba\u7684\u6587\u7ae0\u3002",Object(r.jsx)("br",{}),"enjoy writting!"]})]})}var _=Object(c.createContext)(null);function K(){var n=Object(u.a)(["\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n"]);return K=function(){return n},n}function R(){var n=Object(u.a)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return R=function(){return n},n}function q(){var n=Object(u.a)(["\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n"]);return q=function(){return n},n}function G(){var n=Object(u.a)(["\n  color: red;\n"]);return G=function(){return n},n}var H=s.b.div(G()),Q=s.b.div(q()),V=s.b.div(R()),W=s.b.button(K());function X(){var n=Object(c.useContext)(_).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),b=s[0],d=s[1],l=Object(c.useState)(""),p=Object(a.a)(l,2),h=p[0],g=p[1],v=Object(j.f)();return Object(r.jsx)(Q,{children:Object(r.jsxs)("form",{onSubmit:function(t){g(null),t.preventDefault(),function(n,t){return fetch("".concat(x,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(o,b).then((function(t){if(0===t.ok)return g(t.message);f(t.token),O().then((function(t){if(1!==t.ok)return f(null),g(t.toString());n(t.data),v.push("/")}))}))},children:[Object(r.jsxs)(V,{children:["username:"," ",Object(r.jsx)("input",{type:"text",value:o,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(V,{children:["password:"," ",Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsx)(W,{children:"\u767b\u5165"}),h&&Object(r.jsx)(H,{children:h})]})})}var Y=e(40),Z=e(41),nn=e.n(Z);function tn(){var n=Object(u.a)(["\n  color: red;\n"]);return tn=function(){return n},n}function en(){var n=Object(u.a)(["\n  padding: 8px 10px;\n  border: none;\n  font-size: 20px;\n  background: rgb(0,0,0,0.5);\n  border-radius: 5px;\n  cursor: pointer;\n  color: white;\n  margin-top: 30px;\n"]);return en=function(){return n},n}function rn(){var n=Object(u.a)(["\n  width: 100%;\n  height: 40px;\n  border: solid 0.1px rgb(0,0,0,0.2);\n  border-radius: 3px;\n  font-size:20px;\n"]);return rn=function(){return n},n}function cn(){var n=Object(u.a)(["\n  display: block;\n  width: 90vw;\n"]);return cn=function(){return n},n}function on(){var n=Object(u.a)(["\n  height: 70%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  &:nth-child(3) {\n    width:100px;\n  }\n"]);return on=function(){return n},n}var an=s.b.div(on()),un=s.b.div(cn()),sn=s.b.input(rn()),bn=s.b.button(en()),jn=s.b.div(tn());function dn(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],o=t[1],i=Object(c.useState)(""),u=Object(a.a)(i,2),s=u[0],b=u[1],d=Object(c.useState)(""),l=Object(a.a)(d,2),f=l[0],O=l[1],h=Object(j.f)();return Object(r.jsxs)(an,{children:[Object(r.jsxs)(un,{children:[Object(r.jsx)("h2",{children:"Title"}),Object(r.jsx)(sn,{value:e,onChange:function(n){o(n.target.value)}})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h2",{children:"Body"}),Object(r.jsx)(Y.CKEditor,{editor:nn.a,value:s,onReady:function(n){console.log("Editor is ready to use!",n)},onChange:function(n,t){var e=t.getData().replace("<p>","");e=e.replace("</p>",""),b(e),console.log({event:n,editor:t,newData:e})},onBlur:function(n,t){console.log("Blur.",t)},onFocus:function(n,t){console.log("Focus.",t)}})]}),Object(r.jsx)(bn,{onClick:function(){if(""===e||""===s)return O("\u8acb\u8f38\u5165\u8cc7\u6599");(function(n,t){var e=p();return fetch("".concat(x,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(e,s).then((function(){h.push("/")}))},children:"Submit"}),Object(r.jsx)(jn,{children:f})]})}function ln(){var n=Object(u.a)(["\n  margin-top: 10px;\n  padding-top: 20px;\n  border-top: solid 0.5px rgb(0,0,0,0.3);\n  font-size:26px;\n"]);return ln=function(){return n},n}function fn(){var n=Object(u.a)(["\n  font-size: 20px;\n  vertical-align: bottom;\n  color: rgb(0,0,0,0.6);\n"]);return fn=function(){return n},n}function pn(){var n=Object(u.a)(["\n  font-weight: bold;\n  font-size: 26px;\n  vertical-align: baseline;\n"]);return pn=function(){return n},n}function xn(){var n=Object(u.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n"]);return xn=function(){return n},n}function On(){var n=Object(u.a)(["\n  width: 70vw;\n  margin: 0 auto;\n"]);return On=function(){return n},n}var hn=s.b.div(On()),gn=s.b.div(xn()),vn=s.b.div(pn()),mn=s.b.div(fn()),yn=s.b.div(ln());function wn(){var n=Object(c.useState)({}),t=Object(a.a)(n,2),e=t[0],o=t[1],i=Object(j.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(x,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(i).then((function(n){return o(n[0]),console.log(e)})).catch((function(n){return console.log(n.toString())}))}),[]),Object(r.jsxs)(hn,{children:[Object(r.jsxs)(gn,{children:[Object(r.jsx)(vn,{children:e.title}),Object(r.jsx)(mn,{children:new Date(e.createdAt).toLocaleTimeString()})]}),Object(r.jsx)(yn,{children:e.body})]})}function Sn(){var n=Object(u.a)(["\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n"]);return Sn=function(){return n},n}function kn(){var n=Object(u.a)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return kn=function(){return n},n}function zn(){var n=Object(u.a)(["\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n"]);return zn=function(){return n},n}function Cn(){var n=Object(u.a)(["\n  color: red;\n"]);return Cn=function(){return n},n}var Pn=s.b.div(Cn()),Dn=s.b.div(zn()),En=s.b.div(kn()),Bn=s.b.button(Sn());function Tn(){var n=Object(c.useContext)(_).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),b=s[0],d=s[1],l=Object(c.useState)(""),p=Object(a.a)(l,2),h=p[0],g=p[1],v=Object(c.useState)(""),m=Object(a.a)(v,2),y=m[0],w=m[1],S=Object(j.f)();return Object(r.jsx)(Dn,{children:Object(r.jsxs)("form",{onSubmit:function(t){w(null),t.preventDefault(),function(n,t,e){return fetch("".concat(x,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,username:n,password:t})}).then((function(n){return n.json()}))}(o,b,h).then((function(t){if(0===t.ok)return w(t.message);f(t.token),O().then((function(t){if(1!==t.ok)return f(null),w(t.toString());n(t.data),S.push("/")}))}))},children:[Object(r.jsxs)(En,{children:["username:"," ",Object(r.jsx)("input",{type:"text",value:o,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(En,{children:["password:"," ",Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsxs)(En,{children:["nickname:"," ",Object(r.jsx)("input",{type:"text",value:h,onChange:function(n){return g(n.target.value)}})]}),Object(r.jsx)(Bn,{children:"\u8a3b\u518a"}),y&&Object(r.jsx)(Pn,{children:y})]})})}function In(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 32px;\n  }\n"]);return In=function(){return n},n}function $n(){var n=Object(u.a)([" \n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return $n=function(){return n},n}function Jn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return Jn=function(){return n},n}function Nn(){var n=Object(u.a)(["\n  margin-left: 20px;\n  font-size: 32px;\n  font-weight: bold;\n  text-decoration: none;\n  color: black;\n"]);return Nn=function(){return n},n}function Un(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  right: 0;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  position: fixed;\n  border-bottom: solid 0.1px rgb(0,0,0,0.2);\n  padding: 0px, 30px;\n  background: white;\n  box-shadow: 0.2px 0.2px 0.3px;\n"]);return Un=function(){return n},n}var An=s.b.div(Un()),Ln=s.b.div(Nn()),Fn=s.b.div(Jn()),Mn=Object(s.b)(b.b)($n(),(function(n){return n.$active&&"background: rgb(0,0,0,0.2)"})),_n=s.b.div(In(),Fn);function Kn(){var n=Object(j.g)(),t=Object(j.f)(),e=Object(c.useContext)(_),o=e.user,i=e.setUser;return Object(r.jsxs)(An,{children:[Object(r.jsxs)(_n,{children:[Object(r.jsx)(Ln,{as:b.b,to:"/",children:"\u5927\u5bb6\u7684\u90e8\u843d\u683c"}),Object(r.jsxs)(Fn,{children:[Object(r.jsx)(Mn,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(r.jsx)(Mn,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc"}),o&&Object(r.jsx)(Mn,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(r.jsxs)(Fn,{children:[!o&&Object(r.jsx)(Mn,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),!o&&Object(r.jsx)(Mn,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"}),o&&Object(r.jsx)(Mn,{onClick:function(){f(""),i(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})}function Rn(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return Rn=function(){return n},n}var qn=s.b.div(Rn());function Gn(){var n=Object(c.useState)(null),t=Object(a.a)(n,2),e=t[0],o=t[1],i=Object(c.useState)(!1),u=Object(a.a)(i,2),s=u[0],d=u[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&(d(!0),O().then((function(n){n.ok&&(o((function(){return n.data})),d(!1))})))}),[]),Object(r.jsx)(_.Provider,{value:{user:e,setUser:o},children:!s&&Object(r.jsx)(qn,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(Kn,{}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(N,{})}),Object(r.jsx)(j.a,{path:"/about",children:Object(r.jsx)(M,{})}),Object(r.jsx)(j.a,{path:"/new-post",children:Object(r.jsx)(dn,{})}),Object(r.jsx)(j.a,{path:"/login",children:Object(r.jsx)(X,{})}),Object(r.jsx)(j.a,{path:"/posts/:id",children:Object(r.jsx)(wn,{})}),Object(r.jsx)(j.a,{path:"/register",children:Object(r.jsx)(Tn,{})})]})]})})})}i.a.render(Object(r.jsx)(s.a,{theme:{},children:Object(r.jsx)(Gn,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.10021d0d.chunk.js.map