(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{47:function(n,t,e){},69:function(n,t,e){"use strict";e.r(t);var r=e(1),o=e(0),c=e(36),i=e.n(c),a=(e(47),e(4)),s=e(3),u=e(2),b=e(9),l=e(5),d=e(24),j="token",f=function(n){localStorage.setItem(j,n)},p=function(){return localStorage.getItem(j)},h="https://student-json-api.lidemy.me",g=function(n,t){return fetch("".concat(h,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))},x=function(){var n=p();return fetch("".concat(h,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function O(){var n=Object(s.a)(["\n  position: relative;\n  width: 100%;\n  top: 30vh;\n  text-align: center;\n  font-size: 40px;\n  color: rgb(0,0,0,0.1)\n  font-scale: bold;\n"]);return O=function(){return n},n}function v(){var n=Object(s.a)(["\n  display: flex;\n"]);return v=function(){return n},n}function m(){var n=Object(s.a)(["\n  padding: 10px;\n  margin-left: 20px;\n  border: none;\n"]);return m=function(){return n},n}function y(){var n=Object(s.a)(["\n  font-size: 20px;\n  cursor: pointer;\n"]);return y=function(){return n},n}function w(){var n=Object(s.a)(["\n  margin: 20px auto;\n  width: 100px;\n  display: flex;\n  justify-content: space-around;\n  list-style-type: none;\n"]);return w=function(){return n},n}function k(){var n=Object(s.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return k=function(){return n},n}function S(){var n=Object(s.a)(["\n  font-size: 24px;\n  text-decoration: none;\n  color: #333;\n"]);return S=function(){return n},n}function C(){var n=Object(s.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    box-shadow: 0.5px 0.5px 2px 0px ;\n  }\n"]);return C=function(){return n},n}function B(){var n=Object(s.a)(["\n  margin-top: 30px;\n  outline: solid rgb(0,0,0,0.2) 0.5px;\n"]);return B=function(){return n},n}function z(){var n=Object(s.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return z=function(){return n},n}var L=u.b.div(z()),T=u.b.div(B()),E=u.b.div(C()),P=Object(u.b)(b.b)(S()),F=u.b.div(k()),D=u.b.ul(w()),I=u.b.li(y()),A=u.b.button(m()),N=u.b.div(v()),M=u.b.div(O());function $(n){var t=n.post,e=n.handleDeletePost;return Object(r.jsxs)(E,{children:[Object(r.jsxs)(P,{to:"/posts/".concat(t.id),children:[t.id," . ",t.title]}),Object(r.jsxs)(N,{children:[Object(r.jsx)(F,{children:new Date(t.createdAt).toLocaleDateString()}),Object(r.jsx)(A,{onClick:function(n){return e(n)},id:t.id,children:"Delete"})]})]})}function H(n){for(var t=n.pages,e=n.setPages,o=[],c=1;c<=t.totalPages;c++)o.push(c);return Object(r.jsx)(D,{children:o.map((function(n){return Object(r.jsx)(I,{onClick:function(n){return function(n){e(Object(d.a)(Object(d.a)({},t),{},{currentPage:n}))}(Number(n.target.innerText))},children:n},n)}))})}function J(){var n=Object(o.useState)([]),t=Object(a.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)({}),s=Object(a.a)(i,2),u=s[0],b=s[1],l=Object(o.useState)(!1),d=Object(a.a)(l,2),j=d[0],f=d[1],g=Object(o.useState)(!1),x=Object(a.a)(g,2),O=x[0],v=x[1];function m(n){(function(n){var t=Number(n.target.getAttribute("id")),e=p();return fetch("".concat(h,"/posts/").concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(n){return n.json()}))})(n).then((function(){v(!O)}))}return Object(o.useLayoutEffect)((function(){f(!0),fetch("".concat(h,"/posts?_sort=id&_order=desc")).then((function(n){return n.json()})).then((function(n){c(n),f(!1);var t=n.length,e=t%5?Math.floor(t/5)+1:Math.floor(t/5);b({totalPages:e,currentPage:1})}))}),[O]),Object(r.jsxs)(L,{children:[!j&&Object(r.jsx)(T,{children:function(n,t){var e=t.currentPage;return n.slice(5*(e-1),5*e)}(e,u).map((function(n){return Object(r.jsx)($,{post:n,handleDeletePost:m},n.id)}))}),!j&&Object(r.jsx)(H,{pages:u,setPages:b}),j&&Object(r.jsx)(M,{children:"Loading"})]})}function U(){var n=Object(s.a)(["\n  font-size: 26px;\n  text-align: center;\n  margin-top: 80px;\n"]);return U=function(){return n},n}function _(){var n=Object(s.a)(["\n  background: rgb(0,0,0,0.1);\n  width: 100vw;\n  height: 120px;\n  text-align: center;\n  font-size: 32px;\n  vertical-align: baseline;\n  padding-top: 60px;\n"]);return _=function(){return n},n}var G=u.b.div(_()),K=u.b.div(U());function R(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(G,{children:"\u95dc\u65bc\u6211\u5011"}),Object(r.jsxs)(K,{children:["\u9019\u662f\u4e00\u500b\u5927\u5bb6\u96c6\u9ad4\u5275\u4f5c\u7684\u90e8\u843d\u683c\u3002",Object(r.jsx)("br",{}),"\u4f60\u53ef\u4ee5\u5728\u9019\u908a\u81ea\u7531\u8a3b\u518a\u3001\u767c\u6587\u4e26\u89c0\u770b\u5225\u4eba\u7684\u6587\u7ae0\u3002",Object(r.jsx)("br",{}),"enjoy writting!"]})]})}var V=Object(o.createContext)(null);function W(){var n=Object(s.a)(["\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n"]);return W=function(){return n},n}function q(){var n=Object(s.a)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return q=function(){return n},n}function Q(){var n=Object(s.a)(["\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n"]);return Q=function(){return n},n}function X(){var n=Object(s.a)(["\n  color: red;\n  margin-top: 20px;\n"]);return X=function(){return n},n}var Y=u.b.div(X()),Z=u.b.div(Q()),nn=u.b.div(q()),tn=u.b.button(W());function en(){var n=Object(o.useContext)(V).setUser,t=Object(o.useState)(""),e=Object(a.a)(t,2),c=e[0],i=e[1],s=Object(o.useState)(""),u=Object(a.a)(s,2),b=u[0],d=u[1],j=Object(o.useState)(""),p=Object(a.a)(j,2),h=p[0],O=p[1],v=Object(l.f)();Object(o.useLayoutEffect)((function(){var n=document.getElementsByTagName("body")[0],t=document.createElement("script");t.innerHTML="\n      window.fbAsyncInit = function() {\n        FB.init({\n          appId      : '382475983013781',\n          cookie     : true,\n          xfbml      : true,\n          version    : 'v9.0'\n        });\n          \n        FB.AppEvents.logPageView();   \n          \n      };\n\n      (function(d, s, id){\n        var js, fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) {return;}\n        js = d.createElement(s); js.id = id;\n        js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n        fjs.parentNode.insertBefore(js, fjs);\n      }(document, 'script', 'facebook-jssdk'));\n\n      // FB.getLoginStatus(function(response) {\n      //   statusChangeCallback(response);\n      // });\n\n      function getLoginStatus() {\n        FB.getLoginStatus(function(response) {\n          statusChangeCallback(response);\n        });\n      }\n\n      setTimeout(() => {\n        getLoginStatus()\n      }, 5000)\n      \n\n      // This is called with the results from from FB.getLoginStatus().\n      function statusChangeCallback(response) {\n        console.log('statusChangeCallback');\n        console.log(response);\n        // The response object is returned with a status field that lets the\n        // app know the current login status of the person.\n        // Full docs on the response object can be found in the documentation\n        // for FB.getLoginStatus().\n        if (response.status === 'connected') {\n          // Logged into your app and Facebook.\n          testAPI();\n        } else if (response.status === 'not_authorized') {\n          // The person is logged into Facebook, but not your app.\n          document.getElementById('status').innerHTML = 'Please log ' +\n            'into this app.';\n        } else {\n          // The person is not logged into Facebook, so we're not sure if\n          // they are logged into this app or not.\n          document.getElementById('status').innerHTML = 'Please log ' +\n            'into Facebook.';\n        }\n      }\n\n      // This function is called when someone finishes with the Login\n      // Button.  See the onlogin handler attached to it in the sample\n      // code below.\n      function checkLoginState() {\n        FB.getLoginStatus(function(response) {\n          statusChangeCallback(response);\n        });\n      }\n\n      // Here we run a very simple test of the Graph API after login is\n      // successful.  See statusChangeCallback() for when this call is made.\n      function testAPI() {\n        console.log('Welcome!  Fetching your information.... ');\n        FB.api('/me', function(response) {\n          console.log('Successful login for: ' + response.name);\n          document.getElementById('status').innerHTML =\n            'Thanks for logging in, ' + response.name + '!';\n        });\n\n      }\n\n      function login() {\n        FB.login(function (response) {\n          /*console.log(response);*/\n        });\n      }\n      \n      function logout() {\n        FB.logout(function (response) {\n          /*console.log(response)*/\n        });\n      }\n    ",n.appendChild(t)}));return Object(r.jsxs)(Z,{children:[Object(r.jsxs)("form",{onSubmit:function(t){O(null),t.preventDefault(),g(c,b).then((function(t){if(0===t.ok)return O(t.message);f(t.token),x().then((function(t){if(1!==t.ok)return f(null),O(t.toString());n(t.data),v.push("/")}))}))},children:[Object(r.jsxs)(nn,{children:["username:"," ",Object(r.jsx)("input",{type:"text",value:c,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(nn,{children:["password:"," ",Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsx)(tn,{children:"\u767b\u5165"})]}),h&&Object(r.jsx)(Y,{children:h}),Object(r.jsx)("button",{onClick:function(){return g()},children:"\u767b\u5165"}),Object(r.jsx)("div",{id:"status"})]})}var rn=e(40),on=e(41),cn=e.n(on);function an(){var n=Object(s.a)(["\n  color: red;\n"]);return an=function(){return n},n}function sn(){var n=Object(s.a)(["\n  padding: 8px 10px;\n  border: none;\n  font-size: 20px;\n  background: rgb(0,0,0,0.5);\n  border-radius: 5px;\n  cursor: pointer;\n  color: white;\n  margin-top: 30px;\n"]);return sn=function(){return n},n}function un(){var n=Object(s.a)(["\n  width: 100%;\n  height: 40px;\n  border: solid 0.1px rgb(0,0,0,0.2);\n  border-radius: 3px;\n  font-size:20px;\n"]);return un=function(){return n},n}function bn(){var n=Object(s.a)(["\n  display: block;\n  width: 90vw;\n"]);return bn=function(){return n},n}function ln(){var n=Object(s.a)(["\n  height: 70%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  &:nth-child(3) {\n    width:100px;\n  }\n"]);return ln=function(){return n},n}var dn=u.b.div(ln()),jn=u.b.div(bn()),fn=u.b.input(un()),pn=u.b.button(sn()),hn=u.b.div(an());function gn(){var n=Object(o.useState)(""),t=Object(a.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),s=Object(a.a)(i,2),u=s[0],b=s[1],d=Object(o.useState)(""),j=Object(a.a)(d,2),f=j[0],g=j[1],x=Object(l.f)();return Object(r.jsxs)(dn,{children:[Object(r.jsxs)(jn,{children:[Object(r.jsx)("h2",{children:"Title"}),Object(r.jsx)(fn,{value:e,onChange:function(n){c(n.target.value)}})]}),Object(r.jsxs)(jn,{children:[Object(r.jsx)("h2",{children:"Body"}),Object(r.jsx)(rn.CKEditor,{editor:cn.a,value:u,onReady:function(n){console.log("Editor is ready to use!",n)},onChange:function(n,t){var e=t.getData().replace("<p>","");e=e.replace("</p>",""),b(e),console.log({event:n,editor:t,newData:e})},onBlur:function(n,t){console.log("Blur.",t)},onFocus:function(n,t){console.log("Focus.",t)}})]}),Object(r.jsx)(pn,{onClick:function(){if(""===e||""===u)return g("\u8acb\u8f38\u5165\u8cc7\u6599");(function(n,t){var e=p();return fetch("".concat(h,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(e,u).then((function(){x.push("/")}))},children:"Submit"}),Object(r.jsx)(hn,{children:f})]})}function xn(){var n=Object(s.a)(["\n  margin-top: 10px;\n  padding-top: 20px;\n  border-top: solid 0.5px rgb(0,0,0,0.3);\n  font-size:26px;\n"]);return xn=function(){return n},n}function On(){var n=Object(s.a)(["\n  font-size: 20px;\n  vertical-align: bottom;\n  color: rgb(0,0,0,0.6);\n"]);return On=function(){return n},n}function vn(){var n=Object(s.a)(["\n  font-weight: bold;\n  font-size: 26px;\n  vertical-align: baseline;\n"]);return vn=function(){return n},n}function mn(){var n=Object(s.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n"]);return mn=function(){return n},n}function yn(){var n=Object(s.a)(["\n  width: 70vw;\n  margin: 0 auto;\n"]);return yn=function(){return n},n}var wn=u.b.div(yn()),kn=u.b.div(mn()),Sn=u.b.div(vn()),Cn=u.b.div(On()),Bn=u.b.div(xn());function zn(){var n=Object(o.useState)({}),t=Object(a.a)(n,2),e=t[0],c=t[1],i=Object(l.h)().id;return Object(o.useEffect)((function(){(function(n){return fetch("".concat(h,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(i).then((function(n){return c(n[0]),console.log(e)})).catch((function(n){return console.log(n.toString())}))}),[]),Object(r.jsxs)(wn,{children:[Object(r.jsxs)(kn,{children:[Object(r.jsx)(Sn,{children:e.title}),Object(r.jsx)(Cn,{children:new Date(e.createdAt).toLocaleTimeString()})]}),Object(r.jsx)(Bn,{children:e.body})]})}function Ln(){var n=Object(s.a)(["\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n"]);return Ln=function(){return n},n}function Tn(){var n=Object(s.a)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return Tn=function(){return n},n}function En(){var n=Object(s.a)(["\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n"]);return En=function(){return n},n}function Pn(){var n=Object(s.a)(["\n  color: red;\n  margin-top: 20px;\n"]);return Pn=function(){return n},n}var Fn=u.b.div(Pn()),Dn=u.b.div(En()),In=u.b.div(Tn()),An=u.b.button(Ln());function Nn(){var n=Object(o.useContext)(V).setUser,t=Object(o.useState)(""),e=Object(a.a)(t,2),c=e[0],i=e[1],s=Object(o.useState)(""),u=Object(a.a)(s,2),b=u[0],d=u[1],j=Object(o.useState)(""),p=Object(a.a)(j,2),g=p[0],O=p[1],v=Object(o.useState)(""),m=Object(a.a)(v,2),y=m[0],w=m[1],k=Object(l.f)();return Object(r.jsxs)(Dn,{children:[Object(r.jsxs)("form",{onSubmit:function(t){w(null),t.preventDefault(),function(n,t,e){return fetch("".concat(h,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,username:n,password:t})}).then((function(n){return n.json()}))}(c,b,g).then((function(t){if(0===t.ok)return w(t.message);f(t.token),x().then((function(t){if(1!==t.ok)return f(null),w(t.toString());n(t.data),k.push("/")}))}))},children:[Object(r.jsxs)(In,{children:["username:"," ",Object(r.jsx)("input",{type:"text",value:c,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(In,{children:["password:"," ",Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsxs)(In,{children:["nickname:"," ",Object(r.jsx)("input",{type:"text",value:g,onChange:function(n){return O(n.target.value)}})]}),Object(r.jsx)(An,{children:"\u8a3b\u518a"})]}),y&&Object(r.jsx)(Fn,{children:y})]})}function Mn(){var n=Object(s.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 32px;\n  }\n"]);return Mn=function(){return n},n}function $n(){var n=Object(s.a)([" \n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  transition: font-size 0.3s;\n\n  &:hover {\n    font-size:18px\n  }\n\n  ","\n"]);return $n=function(){return n},n}function Hn(){var n=Object(s.a)(["\n  display: flex;\n  align-items: center;\n"]);return Hn=function(){return n},n}function Jn(){var n=Object(s.a)(["\n  margin-left: 20px;\n  font-size: 32px;\n  font-weight: bold;\n  text-decoration: none;\n  color: black;\n"]);return Jn=function(){return n},n}function Un(){var n=Object(s.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  right: 0;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  position: fixed;\n  border-bottom: solid 0.1px rgb(0,0,0,0.2);\n  padding: 0px, 30px;\n  background: white;\n  box-shadow: 0.2px 0.2px 0.3px;\n"]);return Un=function(){return n},n}var _n=u.b.div(Un()),Gn=u.b.div(Jn()),Kn=u.b.div(Hn()),Rn=Object(u.b)(b.b)($n(),(function(n){return n.$active&&"background: rgb(0,0,0,0.2)"})),Vn=u.b.div(Mn(),Kn);function Wn(){var n=Object(l.g)(),t=Object(l.f)(),e=Object(o.useContext)(V),c=e.user,i=e.setUser;return Object(r.jsxs)(_n,{children:[Object(r.jsxs)(Vn,{children:[Object(r.jsx)(Gn,{as:b.b,to:"/",children:"\u5927\u5bb6\u7684\u90e8\u843d\u683c"}),Object(r.jsxs)(Kn,{children:[Object(r.jsx)(Rn,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(r.jsx)(Rn,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc"}),c&&Object(r.jsx)(Rn,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(r.jsxs)(Kn,{children:[!c&&Object(r.jsx)(Rn,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),!c&&Object(r.jsx)(Rn,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"}),c&&Object(r.jsx)(Rn,{onClick:function(){f(""),i(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})}function qn(){var n=Object(s.a)(["\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 50px;\n  font-size: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgb(0,0,0,0.2);\n"]);return qn=function(){return n},n}function Qn(){var n=Object(s.a)(["\n  padding-top: 64px;\n  padding-bottom: 50px;\n"]);return Qn=function(){return n},n}var Xn=u.b.div(Qn()),Yn=u.b.div(qn());function Zn(){var n=Object(o.useState)(null),t=Object(a.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(!1),s=Object(a.a)(i,2),u=s[0],d=s[1];return Object(o.useEffect)((function(){localStorage.getItem("token")&&(d(!0),x().then((function(n){n.ok&&(c((function(){return n.data})),d(!1))})))}),[]),Object(r.jsx)(V.Provider,{value:{user:e,setUser:c},children:Object(r.jsxs)(b.a,{children:[!u&&Object(r.jsx)(Wn,{}),!u&&Object(r.jsx)(Xn,{children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/",children:Object(r.jsx)(J,{})}),Object(r.jsx)(l.a,{path:"/about",children:Object(r.jsx)(R,{})}),Object(r.jsx)(l.a,{path:"/new-post",children:Object(r.jsx)(gn,{})}),Object(r.jsx)(l.a,{path:"/login",children:Object(r.jsx)(en,{})}),Object(r.jsx)(l.a,{path:"/posts/:id",children:Object(r.jsx)(zn,{})}),Object(r.jsx)(l.a,{path:"/register",children:Object(r.jsx)(Nn,{})})]})}),!u&&Object(r.jsx)(Yn,{children:"Made by Ian!"})]})})}i.a.render(Object(r.jsx)(u.a,{theme:{colors:{light_gray:"#D0D0D0",black:"#d40202"}},children:Object(r.jsx)(Zn,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.f87bad33.chunk.js.map