{"version":3,"sources":["utils.js","WebAPI.js","pages/HomePage/HomePage.js","pages/AboutPage/AboutPage.js","contexts.js","pages/LoginPage/LoginPage.js","pages/NewPostPage/NewPostPage.js","pages/SinglePostPage/SinglePostPage.js","pages/RegisterPage/RegisterPage.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getMe","fetch","headers","then","res","json","Root","styled","div","PostContainer","PostTitle","Link","PostDate","PageControlerContainer","ul","Page","li","DeleteButton","button","PostRightContainer","Post","post","setIsDeletingPost","handleDeletePost","event","id","Number","target","getAttribute","method","deletePost","to","title","Date","createdAt","toLocaleDateString","onClick","PageControler","pages","setPages","pagesArray","i","totalPages","push","map","pageNumber","currentPage","handleSetCurrentPage","innerText","HomePage","useState","posts","setPosts","isDeletingPost","useEffect","postsLength","length","pagesCount","Math","floor","slice","getCurrentPage","Banner","Body","AboutPage","AuthContext","createContext","ErrorMessage","Container","InputContainer","Button","LoginPage","setUser","useContext","username","setUsername","password","setPassword","errorMessage","setErrormessage","history","useHistory","onSubmit","preventDefault","body","JSON","stringify","login","data","ok","message","response","toString","type","value","onChange","e","NewPostContainer","Section","Input","input","NewPostPage","setTitle","setBody","setErrorMessage","editor","ClassicEditor","onReady","console","log","newData","getData","replace","onBlur","onFocus","submitPost","SinglePostContainer","TitleContainer","Title","CreatedAt","setValue","useParams","getPostsById","result","catch","error","toLocaleTimeString","nickname","setNickname","register","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","location","useLocation","user","as","pathname","App","isLoadinGetMe","setIsLoadinGetMe","Provider","exact","path","ReactDOM","render","theme","colors","red_300","red_400","red_500","document","getElementById"],"mappings":"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","file":"static/js/main.b267b257.chunk.js","sourcesContent":["const TOKEN_NAME = 'token'\r\n\r\nexport const setAuthToken = (token) => {\r\n  localStorage.setItem(TOKEN_NAME, token)\r\n}\r\n\r\nexport const getAuthToken = () => {\r\n  return localStorage.getItem(TOKEN_NAME)\r\n}","import { getAuthToken } from './utils'\r\n\r\nconst BASE_URL = 'https://student-json-api.lidemy.me'\r\n\r\nexport const getPosts = () => {\r\n  return fetch(`${BASE_URL}/posts?_sort=id&_order=desc`).then((res) => res.json())\r\n}\r\n\r\nexport const getPostsById = (id) => {\r\n  return fetch(`${BASE_URL}/posts?id=${id}`).then((res) => res.json())\r\n}\r\n\r\nexport const login = (username, password) => {\r\n  return fetch(`${BASE_URL}/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    })\r\n  })\r\n  .then(res => res.json())\r\n}\r\n\r\nexport const register = (username, password, nickname) => {\r\n  return fetch(`${BASE_URL}/register`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      nickname,\r\n      username,\r\n      password\r\n    })\r\n  })\r\n  .then(res => res.json())\r\n}\r\n\r\nexport const getMe = () => {\r\n  const token = getAuthToken()\r\n  return fetch(`${BASE_URL}/me`, {\r\n    headers: {\r\n      'authorization': `Bearer ${token}`\r\n    }\r\n  })\r\n  .then(res => res.json())\r\n}\r\n\r\nexport const submitPost = (title, body) => {\r\n  const token = getAuthToken()\r\n  return fetch(`${BASE_URL}/posts`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n      'authorization': `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify({\r\n      title,\r\n      body,\r\n    })\r\n  })\r\n  .then(res => res.json())\r\n}\r\n\r\nexport const deletePost = (event) => {\r\n  const id = Number(event.target.getAttribute('id'))\r\n  const token = getAuthToken()\r\n  return fetch(`${BASE_URL}/posts/${id}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'authorization': `Bearer ${token}`\r\n    }\r\n  })\r\n  .then(res => res.json())\r\n}","import React, { useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\nimport PropTypes from \"prop-types\"\nimport { Link } from \"react-router-dom\";\nimport {deletePost, getPosts} from '../../WebAPI'\n\nconst Root = styled.div `\n  width: 80%;\n  margin: 0 auto;\n`\n\nconst PostContainer = styled.div `\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`\n\nconst PostTitle = styled(Link) `\n  font-size: 24px;\n  text-decoration: none;\n  color: #333;\n`\n\nconst PostDate = styled.div `\n  color: rgba(0, 0, 0, 0.8);\n`\n\nconst PageControlerContainer = styled.ul `\n  margin: 20px auto;\n  width: 100px;\n  display: flex;\n  justify-content: space-around;\n  list-style-type: none;\n`\n\nconst Page = styled.li `\n  font-size: 20px;\n  cursor: pointer;\n`\n\nconst DeleteButton = styled.button `\n  padding: 10px;\n  margin-left: 20px;\n  border: none;\n`\n\nconst PostRightContainer = styled.div `\n  display: flex;\n`\n\nfunction Post({post, setIsDeletingPost}) {\n  function handleDeletePost(event) {\n    setIsDeletingPost(() => {return false})\n    deletePost(event).then(() => {\n      setIsDeletingPost(() => {return false})\n    })\n  }\n\n  return (\n    <PostContainer>\n      <PostTitle to={`/posts/${post.id}`}>{post.id}{\" . \"}{post.title}</PostTitle>\n      <PostRightContainer>\n        <PostDate>{new Date(post.createdAt).toLocaleDateString()}</PostDate>\n        <DeleteButton onClick={(event) => handleDeletePost(event) } id={post.id}>Delete</DeleteButton>\n      </PostRightContainer>\n    </PostContainer>\n  )\n}\n\nPost.propTypes = {\n  post: PropTypes.object\n}\n\nfunction PageControler({pages, setPages}) {\n  const pagesArray = []\n  for(let i=1; i <= pages.totalPages; i++) {\n    pagesArray.push(i)\n  }\n\n  function handleSetCurrentPage(pageNumber) {\n    setPages({\n      ...pages,\n      currentPage: pageNumber\n    })\n  }\n\n  return (\n    <PageControlerContainer>\n      {pagesArray.map(pageNumber => \n        <Page onClick={(event) => handleSetCurrentPage(Number(event.target.innerText))} key={pageNumber}>{pageNumber}</Page>\n      )}\n    </PageControlerContainer>\n  )\n}\n\nPageControler.propTypes = {\n  pages: PropTypes.object,\n  setPages: PropTypes.func\n}\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([])\n  const [pages, setPages] = useState({})\n  const [isDeletingPost, setIsDeletingPost] = useState(false)\n  const capacity = 5\n\n  useEffect(() => {\n    getPosts()\n    .then(posts => {\n      setPosts(() => {return posts})\n      const postsLength = posts.length\n      const pagesCount = postsLength % capacity ? Math.floor(postsLength/capacity)+1 : Math.floor(postsLength/capacity)\n      setPages({\n        totalPages: pagesCount,\n        currentPage: 1\n      })\n    })\n  }, [isDeletingPost])\n\n  function getCurrentPage(posts, pages) {\n    if(true) { \n      const currentPage = pages.currentPage\n      return posts.slice((currentPage-1)*capacity ,currentPage*capacity)\n    }\n    return\n  }\n\n  return (\n    <Root>\n      { getCurrentPage(posts, pages).map(post => <Post post={post} key={post.id} setIsDeletingPost={setIsDeletingPost}></Post>) }\n      <PageControler pages={pages} setPages={setPages}></PageControler>\n    </Root>\n  )\n}\n\nHomePage.propTypes = {\n  posts: PropTypes.object,\n  pages: PropTypes.object\n}\n","import React, { useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\n\nconst Banner = styled.div `\n  background: rgb(0,0,0,0.1);\n  width: 100vw;\n  height: 120px;\n  text-align: center;\n  font-size: 32px;\n  vertical-align: baseline;\n  padding-top: 60px;\n`\n\nconst Body = styled.div `\n  font-size: 26px;\n  text-align: center;\n  margin-top: 80px;\n`\n\n\nexport default function AboutPage() {\n\n  return (\n    <div>\n      <Banner>關於我們</Banner>\n      <Body>這是一個大家集體創作的部落格。<br />\n      你可以在這邊自由註冊、發文並觀看別人的文章。<br/>\n      enjoy writting!\n      </Body>\n    </div>\n\n  )\n}\n","import { createContext } from 'react'\r\n\r\nexport const AuthContext = createContext(null)\r\n","import React, { useState, useContext } from \"react\"\nimport styled from \"styled-components\"\nimport { login, getMe } from '../../WebAPI'\nimport { setAuthToken } from '../../utils'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../contexts'\n\nconst ErrorMessage = styled.div `\n  color: red;\n`\n\nconst Container = styled.div `\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n`\n\nconst InputContainer = styled.div `\n  padding-top: 10px;\n  padding-bottom: 10px;\n`\n\nconst Button = styled.button `\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n`\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [errorMessage, setErrormessage] = useState('')\n  const history = useHistory()\n\n  const handleSubmit = (event) => {\n    setErrormessage(null)\n    event.preventDefault()\n    login(username, password).then(data => {\n      if(data.ok === 0) {\n        return setErrormessage(data.message)\n      }\n      setAuthToken(data.token)\n\n      getMe().then(response => {\n        if (response.ok !== 1) {\n          setAuthToken(null)\n          return setErrormessage(response.toString())\n        }\n        setUser(response.data)\n        history.push('/')\n      })\n    })\n  }\n\n  return (\n    <Container>\n      <form onSubmit={handleSubmit}>\n        <InputContainer>\n          username:{\" \"}\n          <input type=\"text\" value={username} onChange={(e) => setUsername(e.target.value)}></input>\n        </InputContainer>\n        <InputContainer>\n          password:{\" \"}\n          <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}></input>\n        </InputContainer>\n        <Button>登入</Button>\n        { errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage> }\n      </form>\n    </Container>\n  )\n}","import React, { useState } from \"react\"\nimport styled from \"styled-components\"\nimport { submitPost } from '../../WebAPI'\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { useHistory } from 'react-router-dom'\n\nconst NewPostContainer = styled.div `\n  height: 70%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  &:nth-child(3) {\n    width:100px;\n  }\n`\n\nconst Section = styled.div `\n  display: block;\n  width: 90vw;\n`\n\nconst Input = styled.input`\n  width: 100%;\n  height: 40px;\n  border: solid 0.1px rgb(0,0,0,0.2);\n  border-radius: 3px;\n  font-size:20px;\n`\n\nconst Button = styled.button`\n  padding: 8px 10px;\n  border: none;\n  font-size: 20px;\n  background: rgb(0,0,0,0.5);\n  border-radius: 5px;\n  cursor: pointer;\n  color: white;\n  margin-top: 30px;\n`\n\nconst ErrorMessage = styled.div `\n  color: red;\n`\n\nexport default function NewPostPage() {\n  const [title, setTitle] = useState('')\n  const [body, setBody] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const history = useHistory()\n\n  function handleSubmit() {\n    if(title === '' || body === '') {\n      return setErrorMessage('請輸入資料')\n    }\n    submitPost(title, body).then(() => {\n      history.push('/')\n    })\n  }\n\n  return (\n    <NewPostContainer>\n      <Section>\n        <h2>Title</h2>\n        <Input value={title} onChange={(event) => {setTitle(event.target.value)}}></Input>\n      </Section>\n      <Section>\n        <h2>Body</h2>\n        <CKEditor \n          editor={ ClassicEditor }\n          value={body}\n          onReady={ editor => {\n              // You can store the \"editor\" and use when it is needed.\n              console.log( 'Editor is ready to use!', editor );\n          } }\n          onChange={ ( event, editor ) => {\n              const data = editor.getData();\n              let newData = data.replace('<p>', '')\n              newData = newData.replace('</p>', '')\n              setBody(newData)\n              console.log( { event, editor, newData } );\n          } }\n          onBlur={ ( event, editor ) => {\n              console.log( 'Blur.', editor );\n          } }\n          onFocus={ ( event, editor ) => {\n              console.log( 'Focus.', editor );\n          } }\n        />\n      </Section>\n      <Button onClick={handleSubmit}>Submit</Button>\n      <ErrorMessage>{errorMessage}</ErrorMessage>\n    </NewPostContainer>\n  )\n}\n","import React, { useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\nimport PropTypes from \"prop-types\"\nimport {\n  useParams,\n  Link\n} from \"react-router-dom\";\nimport { getPostsById } from '../../WebAPI'\n\nNewPostPage.propTypes = {\n  post: PropTypes.object\n}\n\nconst SinglePostContainer = styled.div `\n  width: 70vw;\n  margin: 0 auto;\n`\n\nconst TitleContainer = styled.div `\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n`\n\nconst Title = styled.div `\n  font-weight: bold;\n  font-size: 26px;\n  vertical-align: baseline;\n`\n\nconst CreatedAt = styled.div `\n  font-size: 20px;\n  vertical-align: bottom;\n  color: rgb(0,0,0,0.6);\n`\n\nconst Body = styled.div `\n  margin-top: 10px;\n  padding-top: 20px;\n  border-top: solid 0.5px rgb(0,0,0,0.3);\n  font-size:26px;\n`\n\nexport default function NewPostPage() {\n  const [value, setValue] = useState({})\n  const {id} = useParams()\n  useEffect(() => {\n    getPostsById(id)\n    .then(result => {\n      setValue(result[0])\n      return console.log(value)\n    }).catch(error => {\n      return console.log(error.toString())\n    })\n  }, [])\n\n  return (\n    <SinglePostContainer>\n      <TitleContainer>\n        <Title>{value.title}</Title>\n        <CreatedAt>{new Date(value.createdAt).toLocaleTimeString()}</CreatedAt>\n      </TitleContainer>\n      <Body>{value.body}</Body>\n    </SinglePostContainer>\n  )\n}\n","import React, { useState, useContext } from \"react\"\nimport styled from \"styled-components\"\nimport { register, getMe } from '../../WebAPI'\nimport { setAuthToken } from '../../utils'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../contexts'\n\nconst ErrorMessage = styled.div `\n  color: red;\n`\n\nconst Container = styled.div `\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  width: 30vw;\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  background: white;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-radius: 5px;\n  border: solid 0.5px rgb(0,0,0,0.2);\n`\n\nconst InputContainer = styled.div `\n  padding-top: 10px;\n  padding-bottom: 10px;\n`\n\nconst Button = styled.button `\n  padding: 6px 10px;\n  border: none;\n  border-radius: 2px;\n  background: rgb(0,0,0,0.15);\n  font-size: 20px;\n  position: relative;\n  left: 50%;\n  transform: translate(-50%,0px);\n  margin-top:10px;\n`\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [nickname, setNickname] = useState('')\n  const [errorMessage, setErrormessage] = useState('')\n  const history = useHistory()\n\n  const handleSubmit = (event) => {\n    setErrormessage(null)\n    event.preventDefault()\n    register(username, password, nickname)\n    .then(data => {\n      if(data.ok === 0) {\n        return setErrormessage(data.message)\n      }\n      setAuthToken(data.token)\n      getMe().then(response => {\n        if (response.ok !== 1) {\n          setAuthToken(null)\n          return setErrormessage(response.toString())\n        }\n        setUser(response.data)\n        history.push('/')\n      })\n    })\n  }\n\n  return (\n    <Container>\n      <form onSubmit={handleSubmit}>\n        <InputContainer>\n          username:{\" \"}\n          <input type=\"text\" value={username} onChange={(e) => setUsername(e.target.value)}></input>\n        </InputContainer>\n        <InputContainer>\n          password:{\" \"}\n          <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}></input>\n        </InputContainer>\n        <InputContainer>\n          nickname:{\" \"}\n          <input type=\"text\" value={nickname} onChange={(e) => setNickname(e.target.value)}></input>\n        </InputContainer>\n        <Button>註冊</Button>\n        { errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage> }\n      </form>\n    </Container>\n  )\n}","import React, { useContext } from \"react\"\nimport styled from \"styled-components\"\nimport {\n  Link,\n  useLocation\n} from \"react-router-dom\";\nimport { AuthContext } from '../../contexts'\nimport { setAuthToken } from '../../utils'\nimport { useHistory } from 'react-router-dom'\n\nconst HeaderContainer =styled.div `\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  right: 0;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  position: fixed;\n  border-bottom: solid 0.1px rgb(0,0,0,0.2);\n  padding: 0px, 30px;\n  background: white;\n  box-shadow: 0.2px 0.2px 0.3px;\n`\n\nconst Brand = styled.div `\n  margin-left: 20px;\n  font-size: 32px;\n  font-weight: bold;\n  text-decoration: none;\n  color: black;\n`\n\nconst NavbarList = styled.div `\n  display: flex;\n  align-items: center;\n`\n\nconst Nav = styled(Link) ` \n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ${(props) => \n    props.$active && `background: rgb(0,0,0,0.2)`\n  }\n`\n\nconst LeftContainer = styled.div `\n  display: flex;\n  align-items: center;\n\n  ${NavbarList} {\n    margin-left: 32px;\n  }\n`\n\nexport default function Header() {\n  const location = useLocation()\n  const history = useHistory()\n  const { user, setUser } = useContext(AuthContext)\n\n  const handleLogout = () => {\n    setAuthToken('')\n    setUser(null)\n    if(location.pathname !== \"/\") {\n      history.push('/')\n    }\n  }\n\n  return (\n    <HeaderContainer>\n      <LeftContainer>\n        <Brand as={Link} to='/'>大家的部落格</Brand>\n        <NavbarList>\n          <Nav to='/' $active={location.pathname === '/'} >首頁</Nav>\n          <Nav to='/about' $active={location.pathname === '/about'} >關於</Nav>\n          { user && <Nav to='/new-post' $active={location.pathname === '/new-post'}>發布文章</Nav> }\n        </NavbarList>\n      </LeftContainer>\n      <NavbarList>\n        { !user && <Nav to='/login' $active={location.pathname === '/login'}>登入</Nav> }\n        { !user && <Nav to='/register' $active={location.pathname === '/register'}>註冊</Nav> }\n        { user && <Nav onClick={handleLogout}>登出</Nav>}\n      </NavbarList>\n    </HeaderContainer>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport HomePage from '../../pages/HomePage'\nimport AboutPage from '../../pages/AboutPage'\nimport LoginPage from '../../pages/LoginPage'\nimport NewPostPage from '../../pages/NewPostPage'\nimport SinglePostPage from '../../pages/SinglePostPage'\nimport RegisterPage from '../../pages/RegisterPage'\nimport Header from '../Header'\nimport { AuthContext } from \"../../contexts\";\nimport { getMe } from \"../../WebAPI\"\n\nconst Root = styled.div `\n  padding-top: 64px;\n`\n\nexport default function App() {\n  const [user, setUser] = useState(null)\n  const [isLoadinGetMe, setIsLoadinGetMe] = useState(false)\n\n  useEffect(() => {\n    setIsLoadinGetMe(true)\n    if(localStorage.getItem('token')) {\n      getMe().then(response => {\n        if(response.ok) {\n          setUser(() => {\n            return response.data\n          })\n          setIsLoadinGetMe(false)\n        }\n      })\n    }\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{user, setUser}}>\n      {!isLoadinGetMe && (\n        <Root>\n          <Router>\n              <Header />\n              <Switch>\n                <Route exact path=\"/\"> \n                  <HomePage />\n                </Route>\n                <Route path=\"/about\"> \n                  <AboutPage />\n                </Route>\n                <Route path=\"/new-post\"> \n                  <NewPostPage />\n                </Route>\n                <Route path=\"/login\">\n                  <LoginPage />\n                </Route>\n                <Route path=\"/posts/:id\">\n                  <SinglePostPage />\n                </Route>\n                <Route path=\"/register\">\n                  <RegisterPage />\n                </Route>\n              </Switch>\n          </Router>\n        </Root>\n      )}\n    </AuthContext.Provider>\n  )\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { ThemeProvider } from \"styled-components\"; //一個 <ThemeProvider>的外層 Component 來實踐換網站主題設計的系統\n\nconst theme = {\n  colors : {\n    red_300: '#c02828',\n    red_400: '#ffa7a7',\n    red_500: '#ff4949',\n  }\n}\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n      <App />\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}